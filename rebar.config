%%-*- mode: erlang -*-

{sub_dirs, ["rel"]}.

{lib_dirs, ["deps", "apps"]}.

{cover_enabled, true}.

{erlydtl_opts, [
    {compiler_options, [report, return, debug_info]}]}.

{erl_opts, [debug_info,
            warnings_as_errors,
            {parse_transform, lager_transform}]}.

{edoc_opts, [{preprocess, true}]}.

{deps, [
    {erlydtl, ".*",
     {git, "git://github.com/evanmiller/erlydtl.git", {branch, "master"}}},
    {node_package, ".*",
      {git, "git://github.com/basho/node_package", {branch, "master"}}},
    {lager, ".*",
      {git, "git://github.com/basho/lager", {branch, "master"}}},
    {webmachine, ".*",
      {git, "git://github.com/basho/webmachine.git", {branch, "master"}}},
    {erlcloud, ".*",
      {git, "git://github.com/basho/erlcloud.git", {branch, "master"}}}
    ]}.

{plugin_dir, "src"}.

{plugins, [rebar_js_handlebars_plugin, rebar_js_concatenator_plugin]}.

{js_handlebars, [
    {doc_root,   "priv/www/js/templates"},
    {out_dir,    "priv/www/js"},
    {target,     "Ember.TEMPLATES"},
    {compiler,   "Ember.Handlebars.compile"},
    {templates,  [{"generated/templates.js", [
        "application.hbs",
        "users.hbs",
        "users/button.hbs",
        "users/new.hbs",
        "users/item.hbs",
        "users/index.hbs"]}]}
]}.

{js_concatenator, [
    {doc_root,        "priv/www/js/vendor"},
    {out_dir,         "priv/www/js"},
    {concatenations,  [{"generated/vendor.js", [
        "jquery-1.7.2.js",
        "jquery-ui-1.8.16.custom.min.js",
        "spin-1.2.7.min.js",
        "handlebars.js",
        "ember-latest.js",
        "ember-data-latest.js",
        "minispade.js"], []}]}
]}.
